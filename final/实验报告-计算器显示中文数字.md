# 实验：计算器显示中文数字

## 实验环境

* windows 10
* visual studio 2019

## 实验原理

使用Dll注入去hook关键API实现**计算器显示中文数字**。

通过注入Dll文件来钩取某个API，Dll文件注入目标进程后，修改IAT来更改进程中调用的特定的API的功能。

## 实验过程

### 1. 找到目标API

计算器正常执行时，会调用SetWindowsTextW()，调用流程是从IAT中调用地址。

### 2. 编写DLL

```
* 获得原目标API的地址并保存。
* 实现自己的函数，并保存地址。
* 找到IAT的地址，并找到API在其中的位置。
* 使用VirtualProtect将内存修改为可读写。
* 修改IAT中的目标API的地址，替换为自己函数的地址。
* 恢复原内存属性。
```

[calc2chinese.dll]()

### 3. 注入DLL

### 4. 卸载DLL

### 5. 演示

## 实验参考

